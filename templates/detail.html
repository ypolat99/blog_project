{% extends "layout.html" %}

{% block body %}
        <!-- Page content-->
        <div class="container mt-5">
            <div class="row">
                <div class="col-lg-8">
                    <!-- Post content-->
                    <article>
                        <!-- Post header-->
                        <header class="mb-4">
                            <!-- Post title-->
                            <h3 class="fw-bolder mb-1"> {{article.title}} </h3>
                            <div class="text-muted fst-italic mb-2">by {{article.author.username}} </div>
                            <hr>
                            <p>{{article.created_date}} </p>
                            <hr>

                        </header>

                        {% if article.article_image %}
                            <!-- Preview image figure -->
                            <figure class="mb-4"><img class="img-fluid rounded" src="{{article.article_image.url}}" alt="..." /></figure>
     
                        {% endif %}

                         <!--Post content--> 
                        <p class= "lead">
                        {{article.content | safe}}
                        </p>
 
                    </article>

                    <!-- Comments section
                    <form>
                        <div class="form-group">
                            <label for="exampleInputEmail1">Name</label>
                            <input name = "comment_author" class="form-control"  placeholder="Enter your name...">
                            <small id="emailHelp" class="form-text text-muted"></small>
                        </div>
                    </form>

                    <section class="mb-5">
                    
                        <div >
                            <label for="exampleInputEmail1">Comment</label>
                            <!-- Comment form-
                            <form method = "post" action = "{% url 'article:comment' article.id %}" class="mb-4">
                                <textarea name ="comment_content" class="form-control" rows="3" placeholder="Join the discussion and leave a comment!"></textarea>
                                    {% csrf_token %}                            
                                    <button type="submit" class = "btn btn-primary"> Add Comment </button>
                                </form>
                        <div class="d-flex mb-4"></div> 
            
                    </section> -->

                    <h4> Comments </h4>
                    {% if comments %}
                    {% for comment in comments  %}
                         <div class= "media mb-4">
                            <img class="d-flex mr-3 rounded-circle" src ="http://placehold.it/50x50"> <img>
                            <div class = "media-body">
                                <h5 class = "mt-0"> {{comment.comment_author}} </h5>
                                {{comment.comment_date}}
                                <br>
                                {{comment.comment_content}}      
                                <br>                             
                            </div>
                        </div>
                    {% endfor %}

                    {% else %}
                    <div class= "alert alert-danger"> 
                        Be the first one to comment on this article!
                    </div>

                    

                    {% endif %}
                    <br><br>

                        <h5 > Make a Comment </h5>
                        <div >
                            <form action = "{% url 'article:comment' article.id %}" method = "POST">
                                {% csrf_token %}
                                <div class = "form-group">
                                    <label > Name </label>
                                    <input name = "comment_author" type = "text" class = "form-control" >
                                </div>

                                <div class = "form-group">
                                    <label> Comment </label>
                                    <textarea name= "comment_content" class = "form-control" rows="3"  placeholder= "Leave a comment here..."></textarea>
                                </div>
                                <button type="submit" class = "btn btn-primary"> Add Comment </button>
                            </form>
                         </div>
               
                     
               
                </div>    
            </div> 
        </div>      
{% endblock  %}

